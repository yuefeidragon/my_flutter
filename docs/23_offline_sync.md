# Q23：离线优先数据同步与冲突解决（操作日志/幂等/向量时钟/合并策略）

标准答案要点：
- 离线优先设计通常基于操作日志（oplog）、幂等操作与冲突合并（CRDT、OT、last-write/merge policies）。需要明确冲突优先级、合并逻辑与回滚/补偿策略。

深度解析：
- 讨论常见策略：客户端记录本地操作并在恢复网络时发到服务端；使用版本向量或时间戳解决冲突；如何保证幂等性与重放安全。举例说明冲突场景和合并策略选择依据（domain-driven）。

加分项：
- 说明如何在 UI 层做乐观更新并在合并失败时回滚，并提及安全/认证与数据一致性权衡。

评分细则（10分）：
- 架构与数据模型 4分；冲突解决策略 4分；实践注意事项 2分
